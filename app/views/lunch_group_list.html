<div class="pull-right text-right">
    <p ng-show="skills.skills.length > 1">
        <button class="btn btn-default" ng-click="changeSkill()">Change Skill</button>
    </p>
    <br/>
    <p class="text-muted">
        <span ng-show="!saving && !saved">Saving automatically</span>
        <span ng-show="saving">Saving...</span>
        <span ng-show="!saving && saved">Groups saved</span>
    </p>
</div>

<h1 class="align-top">
    <small>{{ skill.event.name || "&nbsp;" }}</small>
    <br/>
    {{ skill.number }} {{ skill.name.text || "&nbsp;" }}
</h1>

<hr/>

<div ng-show="loading">
    <ws-spinner></ws-spinner>
</div>

<div class="row">
    <div class="col-sm-6">
        <h3>Expert groups</h3>
        <div class="panel panel-default" ng-repeat="group in groups.groups | filter:{type:'EXPERT'} as expertGroups">
          <div class="panel-heading">
            <input type="text" class="form-control" ng-model="group.name" ng-change="groupChanged(group)">
          </div>
          <table class="table table-hover">
              <colgroup>
                  <col width="70%" />
                  <col width="30%" />
              </colgroup>
              <tbody>
                  <tr ng-repeat="person in group.persons">
                      <td>{{ person.first_name }} {{ person.last_name }}</td>
                      <td class="text-right"><button type="button" class="btn btn-danger btn-xs" ng-click="removePerson(group, person)" title="Remove"><span class="glyphicon glyphicon-ban-circle"></span></button></td>
                  </tr>
                  <tr>
                      <td>
                          <div class="btn-group" uib-dropdown>
                              <button id="single-button" type="button" class="btn btn-primary btn-sm" uib-dropdown-toggle ng-disabled="disabled">Add to group <span class="caret"></span></button>
                              <ul class="dropdown-menu" uib-dropdown-menu>
                                  <li ng-repeat="person in experts.persons | filter:inGroup as filteredExperts"><a href ng-click="addPerson(group, person)">{{ person.first_name }} {{ person.last_name }}</a></li>
                                  <li ng-show="filteredExperts.length == 0"><a href>No Experts unassigned</a></li>
                              </ul>
                          </div>
                      </td>
                      <td class="text-right">
                          <button type="button" class="btn btn-danger btn-sm" ng-click="deleteGroup(group)">Delete group</button>
                      </td>
                  </tr>
              </tbody>
          </table>
        </div>
        <p ng-show="expertGroups.length == 0">No groups yet</p>
        <p><button type="button" class="btn btn-success" ng-click="addGroup('EXPERT')">Add Expert group</button></p>
    </div>
    <div class="col-sm-6">
        <h3>Competitor groups</h3>
        <div class="panel panel-default" ng-repeat="group in groups.groups | filter:{type:'COMPETITOR'} as competitorGroups">
          <div class="panel-heading">
            <input type="text" class="form-control" ng-model="group.name" ng-change="groupChanged(group)">
          </div>
          <table class="table table-hover">
              <colgroup>
                  <col width="70%" />
                  <col width="30%" />
              </colgroup>
              <tbody>
                  <tr ng-repeat="person in group.persons">
                      <td>{{ person.first_name }} {{ person.last_name }}</td>
                      <td class="text-right"><button type="button" class="btn btn-danger btn-xs" ng-click="removePerson(group, person)" title="Remove"><span class="glyphicon glyphicon-ban-circle"></span></button></td>
                  </tr>
                  <tr>
                      <td>
                          <div class="btn-group" uib-dropdown>
                              <button id="single-button" type="button" class="btn btn-primary btn-sm" uib-dropdown-toggle ng-disabled="disabled">Add to group <span class="caret"></span></button>
                              <ul class="dropdown-menu" uib-dropdown-menu>
                                  <li ng-repeat="person in competitors.persons | filter:inGroup as filteredCompetitors"><a href ng-click="addPerson(group, person)">{{ person.first_name }} {{ person.last_name }}</a></li>
                                  <li ng-show="filteredCompetitors.length == 0"><a href>No Competitors unassigned</a></li>
                              </ul>
                          </div>
                      </td>
                      <td class="text-right">
                          <button type="button" class="btn btn-danger btn-sm" ng-click="deleteGroup(group)">Delete group</button>
                      </td>
                  </tr>
              </tbody>
          </table>
        </div>
        <p ng-show="competitorGroups.length == 0">No groups yet</p>
        <p><button type="button" class="btn btn-success" ng-click="addGroup('COMPETITOR')">Add Competitor group</button></p>
    </div>
</div>
